import{E as Oe,f as X,V as S,g as C,Q as oe,h as Se,i as se}from"./OrbitControls.cdd771a9.js";var L={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}},Back:{In:function(e){var n=1.70158;return e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}},Bounce:{In:function(e){return 1-L.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?L.Bounce.In(e*2)*.5:L.Bounce.Out(e*2-1)*.5+.5}}},U;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?U=function(){var e=process.hrtime();return e[0]*1e3+e[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?U=self.performance.now.bind(self.performance):Date.now!==void 0?U=Date.now:U=function(){return new Date().getTime()};var I=U,Q=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(i){return n._tweens[i]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(n){this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n},e.prototype.remove=function(n){delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]},e.prototype.update=function(n,i){n===void 0&&(n=I()),i===void 0&&(i=!1);var t=Object.keys(this._tweens);if(t.length===0)return!1;for(;t.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<t.length;s++){var a=this._tweens[t[s]],u=!i;a&&a.update(n,u)===!1&&!i&&delete this._tweens[t[s]]}t=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),R={Linear:function(e,n){var i=e.length-1,t=i*n,s=Math.floor(t),a=R.Utils.Linear;return n<0?a(e[0],e[1],t):n>1?a(e[i],e[i-1],i-t):a(e[s],e[s+1>i?i:s+1],t-s)},Bezier:function(e,n){for(var i=0,t=e.length-1,s=Math.pow,a=R.Utils.Bernstein,u=0;u<=t;u++)i+=s(1-n,t-u)*s(n,u)*e[u]*a(t,u);return i},CatmullRom:function(e,n){var i=e.length-1,t=i*n,s=Math.floor(t),a=R.Utils.CatmullRom;return e[0]===e[i]?(n<0&&(s=Math.floor(t=i*(1+n))),a(e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i],t-s)):n<0?e[0]-(a(e[0],e[0],e[1],e[1],-t)-e[0]):n>1?e[i]-(a(e[i],e[i],e[i-1],e[i-1],t-i)-e[i]):a(e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2],t-s)},Utils:{Linear:function(e,n,i){return(n-e)*i+e},Bernstein:function(e,n){var i=R.Utils.Factorial;return i(e)/i(n)/i(e-n)},Factorial:function(){var e=[1];return function(n){var i=1;if(e[n])return e[n];for(var t=n;t>1;t--)i*=t;return e[n]=i,i}}(),CatmullRom:function(e,n,i,t,s){var a=(i-e)*.5,u=(t-n)*.5,p=s*s,f=s*p;return(2*n-2*i+a+u)*f+(-3*n+3*i-2*a-u)*p+a*s+n}}},Y=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),re=new Q,ae=function(){function e(n,i){i===void 0&&(i=re),this._object=n,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=L.Linear.None,this._interpolationFunction=R.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=Y.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(n,i){return this._valuesEnd=Object.create(n),i!==void 0&&(this._duration=i),this},e.prototype.duration=function(n){return this._duration=n,this},e.prototype.start=function(n){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n!==void 0?typeof n=="string"?I()+parseFloat(n):n:I(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(n,i,t,s){for(var a in t){var u=n[a],p=Array.isArray(u),f=p?"array":typeof u,d=!p&&Array.isArray(t[a]);if(!(f==="undefined"||f==="function")){if(d){var l=t[a];if(l.length===0)continue;l=l.map(this._handleRelativeValue.bind(this,u)),t[a]=[u].concat(l)}if((f==="object"||p)&&u&&!d){i[a]=p?[]:{};for(var T in u)i[a][T]=u[T];s[a]=p?[]:{},this._setupProperties(u,i[a],t[a],s[a])}else typeof i[a]=="undefined"&&(i[a]=u),p||(i[a]*=1),d?s[a]=t[a].slice().reverse():s[a]=i[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(n){return n===void 0&&(n=I()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this._group&&this._group.remove(this),this)},e.prototype.resume=function(n){return n===void 0&&(n=I()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},e.prototype.stopChainedTweens=function(){for(var n=0,i=this._chainedTweens.length;n<i;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return this._group=n,this},e.prototype.delay=function(n){return this._delayTime=n,this},e.prototype.repeat=function(n){return this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return this._yoyo=n,this},e.prototype.easing=function(n){return this._easingFunction=n,this},e.prototype.interpolation=function(n){return this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,i){if(n===void 0&&(n=I()),i===void 0&&(i=!0),this._isPaused)return!0;var t,s,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(n>a)return!1;i&&this.start(n)}if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),s=(n-this._startTime)/this._duration,s=this._duration===0||s>1?1:s;var u=this._easingFunction(s);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,s),s===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(t in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[t]=="string"&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo&&this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=n+this._repeatDelayTime:this._startTime=n+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,f=this._chainedTweens.length;p<f;p++)this._chainedTweens[p].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,i,t,s){for(var a in t)if(i[a]!==void 0){var u=i[a]||0,p=t[a],f=Array.isArray(n[a]),d=Array.isArray(p),l=!f&&d;l?n[a]=this._interpolationFunction(p,s):typeof p=="object"&&p?this._updateProperties(n[a],u,p,s):(p=this._handleRelativeValue(u,p),typeof p=="number"&&(n[a]=u+(p-u)*s))}},e.prototype._handleRelativeValue=function(n,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?n+parseFloat(i):parseFloat(i)},e.prototype._swapEndStartRepeatValues=function(n){var i=this._valuesStartRepeat[n],t=this._valuesEnd[n];typeof t=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(t):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=i},e}(),ce="18.6.4",le=Y.nextId,P=re,he=P.getAll.bind(P),ue=P.removeAll.bind(P),pe=P.add.bind(P),fe=P.remove.bind(P),de=P.update.bind(P),Te={Easing:L,Group:Q,Interpolation:R,now:I,Sequence:Y,nextId:le,Tween:ae,VERSION:ce,getAll:he,removeAll:ue,add:pe,remove:fe,update:de},Ie=Object.freeze(Object.defineProperty({__proto__:null,default:Te,Easing:L,Group:Q,Interpolation:R,Sequence:Y,Tween:ae,VERSION:ce,add:pe,getAll:he,nextId:le,now:I,remove:fe,removeAll:ue,update:de},Symbol.toStringTag,{value:"Module"}));const H={type:"change"},B={type:"start"},W={type:"end"};class De extends Oe{constructor(n,i){super(),i===void 0&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const t=this,s={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=n,this.domElement=i,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:X.ROTATE,MIDDLE:X.DOLLY,RIGHT:X.PAN},this.target=new S;const a=1e-6,u=new S;let p=1,f=s.NONE,d=s.NONE,l=0,T=0,D=0;const y=new S,c=new C,r=new C,E=new S,v=new C,g=new C,m=new C,w=new C,_=[],k={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const o=t.domElement.getBoundingClientRect(),h=t.domElement.ownerDocument.documentElement;t.screen.left=o.left+window.pageXOffset-h.clientLeft,t.screen.top=o.top+window.pageYOffset-h.clientTop,t.screen.width=o.width,t.screen.height=o.height};const A=function(){const o=new C;return function(b,O){return o.set((b-t.screen.left)/t.screen.width,(O-t.screen.top)/t.screen.height),o}}(),N=function(){const o=new C;return function(b,O){return o.set((b-t.screen.width*.5-t.screen.left)/(t.screen.width*.5),(t.screen.height+2*(t.screen.top-O))/t.screen.width),o}}();this.rotateCamera=function(){const o=new S,h=new oe,b=new S,O=new S,x=new S,j=new S;return function(){j.set(r.x-c.x,r.y-c.y,0);let F=j.length();F?(y.copy(t.object.position).sub(t.target),b.copy(y).normalize(),O.copy(t.object.up).normalize(),x.crossVectors(O,b).normalize(),O.setLength(r.y-c.y),x.setLength(r.x-c.x),j.copy(O.add(x)),o.crossVectors(j,y).normalize(),F*=t.rotateSpeed,h.setFromAxisAngle(o,F),y.applyQuaternion(h),t.object.up.applyQuaternion(h),E.copy(o),D=F):!t.staticMoving&&D&&(D*=Math.sqrt(1-t.dynamicDampingFactor),y.copy(t.object.position).sub(t.target),h.setFromAxisAngle(E,D),y.applyQuaternion(h),t.object.up.applyQuaternion(h)),c.copy(r)}}(),this.zoomCamera=function(){let o;f===s.TOUCH_ZOOM_PAN?(o=l/T,l=T,t.object.isPerspectiveCamera?y.multiplyScalar(o):t.object.isOrthographicCamera?(t.object.zoom/=o,t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(o=1+(g.y-v.y)*t.zoomSpeed,o!==1&&o>0&&(t.object.isPerspectiveCamera?y.multiplyScalar(o):t.object.isOrthographicCamera?(t.object.zoom/=o,t.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),t.staticMoving?v.copy(g):v.y+=(g.y-v.y)*this.dynamicDampingFactor)},this.panCamera=function(){const o=new C,h=new S,b=new S;return function(){if(o.copy(w).sub(m),o.lengthSq()){if(t.object.isOrthographicCamera){const x=(t.object.right-t.object.left)/t.object.zoom/t.domElement.clientWidth,j=(t.object.top-t.object.bottom)/t.object.zoom/t.domElement.clientWidth;o.x*=x,o.y*=j}o.multiplyScalar(y.length()*t.panSpeed),b.copy(y).cross(t.object.up).setLength(o.x),b.add(h.copy(t.object.up).setLength(o.y)),t.object.position.add(b),t.target.add(b),t.staticMoving?m.copy(w):m.add(o.subVectors(w,m).multiplyScalar(t.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!t.noZoom||!t.noPan)&&(y.lengthSq()>t.maxDistance*t.maxDistance&&(t.object.position.addVectors(t.target,y.setLength(t.maxDistance)),v.copy(g)),y.lengthSq()<t.minDistance*t.minDistance&&(t.object.position.addVectors(t.target,y.setLength(t.minDistance)),v.copy(g)))},this.update=function(){y.subVectors(t.object.position,t.target),t.noRotate||t.rotateCamera(),t.noZoom||t.zoomCamera(),t.noPan||t.panCamera(),t.object.position.addVectors(t.target,y),t.object.isPerspectiveCamera?(t.checkDistances(),t.object.lookAt(t.target),u.distanceToSquared(t.object.position)>a&&(t.dispatchEvent(H),u.copy(t.object.position))):t.object.isOrthographicCamera?(t.object.lookAt(t.target),(u.distanceToSquared(t.object.position)>a||p!==t.object.zoom)&&(t.dispatchEvent(H),u.copy(t.object.position),p=t.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){f=s.NONE,d=s.NONE,t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.up.copy(t.up0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),y.subVectors(t.object.position,t.target),t.object.lookAt(t.target),t.dispatchEvent(H),u.copy(t.object.position),p=t.object.zoom};function G(o){t.enabled!==!1&&(_.length===0&&(t.domElement.setPointerCapture(o.pointerId),t.domElement.addEventListener("pointermove",Z),t.domElement.addEventListener("pointerup",q)),ve(o),o.pointerType==="touch"?me(o):_e(o))}function Z(o){t.enabled!==!1&&(o.pointerType==="touch"?be(o):ye(o))}function q(o){t.enabled!==!1&&(o.pointerType==="touch"?Ee(o):ge(),ee(o),_.length===0&&(t.domElement.releasePointerCapture(o.pointerId),t.domElement.removeEventListener("pointermove",Z),t.domElement.removeEventListener("pointerup",q)))}function V(o){ee(o)}function z(o){t.enabled!==!1&&(window.removeEventListener("keydown",z),d===s.NONE&&(o.code===t.keys[s.ROTATE]&&!t.noRotate?d=s.ROTATE:o.code===t.keys[s.ZOOM]&&!t.noZoom?d=s.ZOOM:o.code===t.keys[s.PAN]&&!t.noPan&&(d=s.PAN)))}function K(){t.enabled!==!1&&(d=s.NONE,window.addEventListener("keydown",z))}function _e(o){if(f===s.NONE)switch(o.button){case t.mouseButtons.LEFT:f=s.ROTATE;break;case t.mouseButtons.MIDDLE:f=s.ZOOM;break;case t.mouseButtons.RIGHT:f=s.PAN;break}const h=d!==s.NONE?d:f;h===s.ROTATE&&!t.noRotate?(r.copy(N(o.pageX,o.pageY)),c.copy(r)):h===s.ZOOM&&!t.noZoom?(v.copy(A(o.pageX,o.pageY)),g.copy(v)):h===s.PAN&&!t.noPan&&(m.copy(A(o.pageX,o.pageY)),w.copy(m)),t.dispatchEvent(B)}function ye(o){const h=d!==s.NONE?d:f;h===s.ROTATE&&!t.noRotate?(c.copy(r),r.copy(N(o.pageX,o.pageY))):h===s.ZOOM&&!t.noZoom?g.copy(A(o.pageX,o.pageY)):h===s.PAN&&!t.noPan&&w.copy(A(o.pageX,o.pageY))}function ge(){f=s.NONE,t.dispatchEvent(W)}function $(o){if(t.enabled!==!1&&t.noZoom!==!0){switch(o.preventDefault(),o.deltaMode){case 2:v.y-=o.deltaY*.025;break;case 1:v.y-=o.deltaY*.01;break;default:v.y-=o.deltaY*25e-5;break}t.dispatchEvent(B),t.dispatchEvent(W)}}function me(o){switch(te(o),_.length){case 1:f=s.TOUCH_ROTATE,r.copy(N(_[0].pageX,_[0].pageY)),c.copy(r);break;default:f=s.TOUCH_ZOOM_PAN;const h=_[0].pageX-_[1].pageX,b=_[0].pageY-_[1].pageY;T=l=Math.sqrt(h*h+b*b);const O=(_[0].pageX+_[1].pageX)/2,x=(_[0].pageY+_[1].pageY)/2;m.copy(A(O,x)),w.copy(m);break}t.dispatchEvent(B)}function be(o){switch(te(o),_.length){case 1:c.copy(r),r.copy(N(o.pageX,o.pageY));break;default:const h=we(o),b=o.pageX-h.x,O=o.pageY-h.y;T=Math.sqrt(b*b+O*O);const x=(o.pageX+h.x)/2,j=(o.pageY+h.y)/2;w.copy(A(x,j));break}}function Ee(o){switch(_.length){case 0:f=s.NONE;break;case 1:f=s.TOUCH_ROTATE,r.copy(N(o.pageX,o.pageY)),c.copy(r);break;case 2:f=s.TOUCH_ZOOM_PAN,r.copy(N(o.pageX-c.x,o.pageY-c.y)),c.copy(r);break}t.dispatchEvent(W)}function J(o){t.enabled!==!1&&o.preventDefault()}function ve(o){_.push(o)}function ee(o){delete k[o.pointerId];for(let h=0;h<_.length;h++)if(_[h].pointerId==o.pointerId){_.splice(h,1);return}}function te(o){let h=k[o.pointerId];h===void 0&&(h=new C,k[o.pointerId]=h),h.set(o.pageX,o.pageY)}function we(o){const h=o.pointerId===_[0].pointerId?_[1]:_[0];return k[h.pointerId]}this.dispose=function(){t.domElement.removeEventListener("contextmenu",J),t.domElement.removeEventListener("pointerdown",G),t.domElement.removeEventListener("pointercancel",V),t.domElement.removeEventListener("wheel",$),t.domElement.removeEventListener("pointermove",Z),t.domElement.removeEventListener("pointerup",q),window.removeEventListener("keydown",z),window.removeEventListener("keyup",K)},this.domElement.addEventListener("contextmenu",J),this.domElement.addEventListener("pointerdown",G),this.domElement.addEventListener("pointercancel",V),this.domElement.addEventListener("wheel",$,{passive:!1}),window.addEventListener("keydown",z),window.addEventListener("keyup",K),this.handleResize(),this.update()}}const ne=new S,Ce=new oe,ie=new S;class Me extends Se{constructor(n=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=n,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(n,i){return super.copy(n,i),this.element=n.element.cloneNode(!0),this}}class Re extends Me{constructor(n){super(n),this.isCSS3DSprite=!0,this.rotation2D=0}copy(n,i){return super.copy(n,i),this.rotation2D=n.rotation2D,this}}const M=new se,Pe=new se;class ke{constructor(n={}){const i=this;let t,s,a,u;const p={camera:{fov:0,style:""},objects:new WeakMap},f=n.element!==void 0?n.element:document.createElement("div");f.style.overflow="hidden",this.domElement=f;const d=document.createElement("div");d.style.transformStyle="preserve-3d",d.style.pointerEvents="none",f.appendChild(d),this.getSize=function(){return{width:t,height:s}},this.render=function(c,r){const E=r.projectionMatrix.elements[5]*u;p.camera.fov!==E&&(f.style.perspective=r.isPerspectiveCamera?E+"px":"",p.camera.fov=E),c.autoUpdate===!0&&c.updateMatrixWorld(),r.parent===null&&r.updateMatrixWorld();let v,g;r.isOrthographicCamera&&(v=-(r.right+r.left)/2,g=(r.top+r.bottom)/2);const w=(r.isOrthographicCamera?"scale("+E+")translate("+l(v)+"px,"+l(g)+"px)"+T(r.matrixWorldInverse):"translateZ("+E+"px)"+T(r.matrixWorldInverse))+"translate("+a+"px,"+u+"px)";p.camera.style!==w&&(d.style.transform=w,p.camera.style=w),y(c,c,r)},this.setSize=function(c,r){t=c,s=r,a=t/2,u=s/2,f.style.width=c+"px",f.style.height=r+"px",d.style.width=c+"px",d.style.height=r+"px"};function l(c){return Math.abs(c)<1e-10?0:c}function T(c){const r=c.elements;return"matrix3d("+l(r[0])+","+l(-r[1])+","+l(r[2])+","+l(r[3])+","+l(r[4])+","+l(-r[5])+","+l(r[6])+","+l(r[7])+","+l(r[8])+","+l(-r[9])+","+l(r[10])+","+l(r[11])+","+l(r[12])+","+l(-r[13])+","+l(r[14])+","+l(r[15])+")"}function D(c){const r=c.elements,E="matrix3d("+l(r[0])+","+l(r[1])+","+l(r[2])+","+l(r[3])+","+l(-r[4])+","+l(-r[5])+","+l(-r[6])+","+l(-r[7])+","+l(r[8])+","+l(r[9])+","+l(r[10])+","+l(r[11])+","+l(r[12])+","+l(r[13])+","+l(r[14])+","+l(r[15])+")";return"translate(-50%,-50%)"+E}function y(c,r,E,v){if(c.isCSS3DObject){const g=c.visible===!0&&c.layers.test(E.layers)===!0;if(c.element.style.display=g===!0?"":"none",g===!0){c.onBeforeRender(i,r,E);let m;c.isCSS3DSprite?(M.copy(E.matrixWorldInverse),M.transpose(),c.rotation2D!==0&&M.multiply(Pe.makeRotationZ(c.rotation2D)),c.matrixWorld.decompose(ne,Ce,ie),M.setPosition(ne),M.scale(ie),M.elements[3]=0,M.elements[7]=0,M.elements[11]=0,M.elements[15]=1,m=D(M)):m=D(c.matrixWorld);const w=c.element,_=p.objects.get(c);if(_===void 0||_.style!==m){w.style.transform=m;const k={style:m};p.objects.set(c,k)}w.parentNode!==d&&d.appendChild(w),c.onAfterRender(i,r,E)}}for(let g=0,m=c.children.length;g<m;g++)y(c.children[g],r,E)}}}export{ke as C,Ie as T,De as a,Re as b};
